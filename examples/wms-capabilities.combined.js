var g=void 0,h=null,i=!1,l=this;
function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function p(a,b){function c(){}c.prototype=b.prototype;a.s=b.prototype;a.prototype=new c};var q,r,s,u;function v(){return l.navigator?l.navigator.userAgent:h}u=s=r=q=i;var w;if(w=v()){var ba=l.navigator;q=0==w.indexOf("Opera");r=!q&&-1!=w.indexOf("MSIE");s=!q&&-1!=w.indexOf("WebKit");u=!q&&!s&&"Gecko"==ba.product}var x=r,y=u,ca=s,z;
a:{var A="",B;if(q&&l.opera)var C=l.opera.version,A="function"==typeof C?C():C;else if(y?B=/rv\:([^\);]+)(\)|;)/:x?B=/MSIE\s+([^\);]+)(\)|;)/:ca&&(B=/WebKit\/(\S+)/),B)var D=B.exec(v()),A=D?D[1]:"";if(x){var F,G=l.document;F=G?G.documentMode:g;if(F>parseFloat(A)){z=String(F);break a}}z=A}var H={};
function I(a){if(!H[a]){for(var b=0,c=String(z).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var j=c[f]||"",m=d[f]||"",t=RegExp("(\\d*)(\\D*)","g"),E=RegExp("(\\d*)(\\D*)","g");do{var k=t.exec(j)||["","",""],n=E.exec(m)||["","",""];if(0==k[0].length&&0==n[0].length)break;b=((0==k[1].length?0:parseInt(k[1],10))<(0==n[1].length?0:parseInt(n[1],10))?-1:(0==k[1].length?0:parseInt(k[1],10))>
(0==n[1].length?0:parseInt(n[1],10))?1:0)||((0==k[2].length)<(0==n[2].length)?-1:(0==k[2].length)>(0==n[2].length)?1:0)||(k[2]<n[2]?-1:k[2]>n[2]?1:0)}while(0==b)}H[a]=0<=b}}var J={};function K(){return J[9]||(J[9]=x&&!!document.documentMode&&9<=document.documentMode)};!x||K();!y&&!x||x&&K()||y&&I("1.9.1");x&&I("9");var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<L.length;f++)c=L[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function N(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=i;b.validateOnParse=i;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function O(){this.c={p:/^\s*|\s*$/g,b:/\s*/g,c:/\s+/,i:/\s*,\s*/g}}function P(a,b,c){c||(c={});var d=a.a[b.namespaceURI]||a.a[a.b];if(d){var e=b.localName||b.nodeName.split(":").pop();(d=d[e]||d["*"])&&d.apply(a,[b,c])}}function Q(a,b,c){c||(c={});for(var b=b.childNodes,d,e=0,f=b.length;e<f;++e)d=b[e],1==d.nodeType&&P(a,d,c)}function R(a){var b="";if(a)for(a=a.firstChild;a;a=a.nextSibling)switch(a.nodeType){case 3:case 4:b+=a.nodeValue}return b}
O.prototype.getAttributeNS=function(a,b,c){var d="";if(a.getAttributeNS)d=a.getAttributeNS(b,c)||"";else{var e=h;if(a.getAttributeNodeNS)e=a.getAttributeNodeNS(b,c);else for(var a=a.attributes,f,j,m=0,t=a.length;m<t;++m)if(f=a[m],f.namespaceURI==b&&(j=f.prefix?f.prefix+":"+c:c,j==f.nodeName)){e=f;break}if(b=e)d=b.nodeValue}return d};function S(){function a(b,a){a.l.push(R(b))}function b(b,a){var e={code:b.getAttribute("exceptionCode"),q:b.getAttribute("locator"),l:[]};a.j.push(e);Q(this,b,e)}this.a={"http://www.opengis.net/ogc":{ServiceExceptionReport:function(b,a){a.exceptionReport={};a.exceptionReport.exceptions=[];Q(this,b,a.exceptionReport)},ServiceException:function(b,a){var e={};e.code=b.getAttribute("code");e.locator=b.getAttribute("locator");e.text=R(b);a.exceptions.push(e)}},"http://www.opengis.net/ows":{ExceptionReport:function(b,
a){a.r=i;a.g={version:b.getAttribute("version"),language:b.getAttribute("language"),j:[]};Q(this,b,a.g)},Exception:function(a,d){b.apply(this,arguments)},ExceptionText:function(b,d){a.apply(this,arguments)}},"http://www.opengis.net/ows/1.1":{ExceptionReport:function(b,a){a.g={version:b.getAttribute("version"),language:b.getAttribute("xml:lang"),j:[]};Q(this,b,a.g)},Exception:function(a,d){b.apply(this,arguments)},ExceptionText:function(b,d){a.apply(this,arguments)}}};O.call(this)}p(S,O);
S.prototype.d=function(a){"string"==typeof a&&(a=N(a));var b={exceptionReport:h};a&&Q(this,a,b);return b};function T(a){this.i=a=a||{};this.f=a.f||h;this.version=a.version;this.profile=a.profile;a.e!==g?this.e=a.e:this.e=i;a.h!==g?this.h=a.h:this.h=i}
T.prototype.d=function(a,b){"string"==typeof a&&(a=N(a));var c;c=a.documentElement;var d;c?(d=this.version,d||(d=c.getAttribute("version"),d||(d=this.f))):d=this.version||this.f;d=(c=d)||this.f;var e=this.profile?"_"+this.profile:"";if(!this.b||this.b.VERSION!=d){var f=this.c["v"+d.replace(/\./g,"_")+e];if(!f&&(""!==e&&this.e&&(e="",f=this.c["v"+d.replace(/\./g,"_")+e]),!f))throw"Can't find a parser for version "+d+e;this.b=new f(this.i)}this.b=this.b;d=this.b.d(a,b);e=this.b.k||h;e!==h&&d[e]===g&&
(d.error=(new S).d(a));d.version=c;return d};function U(){this.b="http://www.opengis.net/wms";this.k="service";this.a={"http://www.opengis.net/wms":{Service:function(a,b){b.service={};Q(this,a,b.service)},Name:function(a,b){b.name=R(a)},Title:function(a,b){b.title=R(a)},Abstract:function(a,b){b["abstract"]=R(a)},BoundingBox:function(a){var b={};b.bbox=[parseFloat(a.getAttribute("minx")),parseFloat(a.getAttribute("miny")),parseFloat(a.getAttribute("maxx")),parseFloat(a.getAttribute("maxy"))];a={x:parseFloat(a.getAttribute("resx")),y:parseFloat(a.getAttribute("resy"))};
if(!isNaN(a.x)||!isNaN(a.y))b.res=a;return b},OnlineResource:function(a,b){b.href=this.getAttributeNS(a,"http://www.w3.org/1999/xlink","href")},ContactInformation:function(a,b){b.contactInformation={};Q(this,a,b.contactInformation)},ContactPersonPrimary:function(a,b){b.personPrimary={};Q(this,a,b.personPrimary)},ContactPerson:function(a,b){b.person=R(a)},ContactOrganization:function(a,b){b.organization=R(a)},ContactPosition:function(a,b){b.position=R(a)},ContactAddress:function(a,b){b.contactAddress=
{};Q(this,a,b.contactAddress)},AddressType:function(a,b){b.type=R(a)},Address:function(a,b){b.address=R(a)},City:function(a,b){b.city=R(a)},StateOrProvince:function(a,b){b.stateOrProvince=R(a)},PostCode:function(a,b){b.postcode=R(a)},Country:function(a,b){b.country=R(a)},ContactVoiceTelephone:function(a,b){b.phone=R(a)},ContactFacsimileTelephone:function(a,b){b.fax=R(a)},ContactElectronicMailAddress:function(a,b){b.email=R(a)},Fees:function(a,b){var c=R(a);c&&"none"!=c.toLowerCase()&&(b.fees=c)},
AccessConstraints:function(a,b){var c=R(a);c&&"none"!=c.toLowerCase()&&(b.accessConstraints=c)},Capability:function(a,b){b.capability={};b.capability.nestedLayers=[];b.capability.layers=[];Q(this,a,b.capability)},Request:function(a,b){b.request={};Q(this,a,b.request)},GetCapabilities:function(a,b){b.getcapabilities={};b.getcapabilities.formats=[];Q(this,a,b.getcapabilities)},Format:function(a,b){"array"==aa(b.formats)?b.formats.push(R(a)):b.format=R(a)},DCPType:function(a,b){Q(this,a,b)},HTTP:function(a,
b){Q(this,a,b)},Get:function(a,b){b.get={};Q(this,a,b.get)},Post:function(a,b){b.post={};Q(this,a,b.post)},GetMap:function(a,b){b.getmap={};b.getmap.formats=[];Q(this,a,b.getmap)},GetFeatureInfo:function(a,b){b.getfeatureinfo={};b.getfeatureinfo.formats=[];Q(this,a,b.getfeatureinfo)},Exception:function(a,b){b.exception={};b.exception.formats=[];Q(this,a,b.exception)},Layer:function(a,b){var c,d;b.capability?(d=b.capability,c=b):d=b;var e=a.getAttributeNode("queryable"),f=e&&e.specified?a.getAttribute("queryable"):
h,j=(e=a.getAttributeNode("cascaded"))&&e.specified?a.getAttribute("cascaded"):h,m=(e=a.getAttributeNode("opaque"))&&e.specified?a.getAttribute("opaque"):h,t=a.getAttribute("noSubsets"),E=a.getAttribute("fixedWidth"),k=a.getAttribute("fixedHeight"),e=c||{},f={nestedLayers:[],styles:c?[].concat(c.styles):[],srs:{},metadataURLs:[],bbox:{},llbbox:e.llbbox,dimensions:{},authorityURLs:{},identifiers:{},keywords:[],queryable:f&&""!==f?"1"===f||"true"===f:e.queryable||i,cascaded:j!==h?parseInt(j,10):e.cascaded||
0,opaque:m?"1"===m||"true"===m:e.opaque||i,noSubsets:t!==h?"1"===t||"true"===t:e.noSubsets||i,fixedWidth:E!==h?parseInt(E,10):e.fixedWidth||0,fixedHeight:k!==h?parseInt(k,10):e.fixedHeight||0,minScale:e.minScale,maxScale:e.maxScale,attribution:e.attribution};c&&(M(f.srs,e.srs),M(f.bbox,e.bbox),M(f.dimensions,e.dimensions),M(f.authorityURLs,e.authorityURLs));b.nestedLayers.push(f);f.capability=d;Q(this,a,f);delete f.capability;f.name&&(c=f.name.split(":"),j=d.request,e=j.getfeatureinfo,0<c.length&&
(f.prefix=c[0]),d.layers.push(f),f.formats===g&&(f.formats=j.getmap.formats),f.infoFormats===g&&e&&(f.infoFormats=e.formats))},Attribution:function(a,b){b.attribution={};Q(this,a,b.attribution)},LogoURL:function(a,b){b.logo={width:a.getAttribute("width"),height:a.getAttribute("height")};Q(this,a,b.logo)},Style:function(a,b){var c={};b.styles.push(c);Q(this,a,c)},LegendURL:function(a,b){var c={width:a.getAttribute("width"),height:a.getAttribute("height")};b.legend=c;Q(this,a,c)},MetadataURL:function(a,
b){var c={type:a.getAttribute("type")};b.metadataURLs.push(c);Q(this,a,c)},DataURL:function(a,b){b.dataURL={};Q(this,a,b.dataURL)},FeatureListURL:function(a,b){b.featureListURL={};Q(this,a,b.featureListURL)},AuthorityURL:function(a,b){var c=a.getAttribute("name"),d={};Q(this,a,d);b.authorityURLs[c]=d.href},Identifier:function(a,b){var c=a.getAttribute("authority");b.identifiers[c]=R(a)},KeywordList:function(a,b){Q(this,a,b)},SRS:function(a,b){b.srs[R(a)]=!0}}};O.call(this)}p(U,O);
U.prototype.d=function(a){"string"==typeof a&&(a=N(a));a&&9==a.nodeType&&(a=a.documentElement);var b={};P(this,a,b);return b};function V(){U.call(this);var a=this.a["http://www.opengis.net/wms"].BoundingBox;M(this.a["http://www.opengis.net/wms"],{WMT_MS_Capabilities:function(b,a){Q(this,b,a)},Keyword:function(b,a){a.keywords&&a.keywords.push({value:R(b)})},DescribeLayer:function(b,a){a.describelayer={formats:[]};Q(this,b,a.describelayer)},GetLegendGraphic:function(b,a){a.getlegendgraphic={formats:[]};Q(this,b,a.getlegendgraphic)},GetStyles:function(b,a){a.getstyles={formats:[]};Q(this,b,a.getstyles)},PutStyles:function(b,
a){a.putstyles={formats:[]};Q(this,b,a.putstyles)},UserDefinedSymbolization:function(b,a){var d={supportSLD:1==parseInt(b.getAttribute("SupportSLD"),10),userLayer:1==parseInt(b.getAttribute("UserLayer"),10),userStyle:1==parseInt(b.getAttribute("UserStyle"),10),remoteWFS:1==parseInt(b.getAttribute("RemoteWFS"),10)};a.userSymbols=d},LatLonBoundingBox:function(b,a){a.llbbox=[parseFloat(b.getAttribute("minx")),parseFloat(b.getAttribute("miny")),parseFloat(b.getAttribute("maxx")),parseFloat(b.getAttribute("maxy"))]},
BoundingBox:function(b,c){var d=a.apply(this,arguments);d.srs=b.getAttribute("SRS");c.bbox[d.srs]=d},ScaleHint:function(b,a){var d=parseFloat(b.getAttribute("min")),e=parseFloat(b.getAttribute("max")),f=Math.pow(2,0.5),j=25.4/0.28;0!==d&&(a.maxScale=parseFloat(39.37*(d/f)*j));e!=Number.POSITIVE_INFINITY&&(a.minScale=parseFloat(39.37*(e/f)*j))},Dimension:function(b,a){var d={name:b.getAttribute("name").toLowerCase(),units:b.getAttribute("units"),unitsymbol:b.getAttribute("unitSymbol")};a.dimensions[d.name]=
d},Extent:function(b,a){var d=b.getAttribute("name").toLowerCase();d in a.dimensions&&(d=a.dimensions[d],d.nearestVal="1"===b.getAttribute("nearestValue"),d.multipleVal="1"===b.getAttribute("multipleValues"),d.current="1"===b.getAttribute("current"),d["default"]=b.getAttribute("default")||"",d.values=R(b).split(","))}})}p(V,U);function W(){V.call(this);this.version="1.1.0";M(this.a["http://www.opengis.net/wms"],{SRS:function(a,b){for(var c=R(a).split(/ +/),d=0,e=c.length;d<e;d++)b.srs[c[d]]=!0}})}p(W,V);function X(){V.call(this);this.version="1.1.1";M(this.a["http://www.opengis.net/wms"],{SRS:function(a,b){b.srs[R(a)]=!0}})}p(X,V);function Y(){X.call(this);this.profile="WMSC";M(this.a["http://www.opengis.net/wms"],{VendorSpecificCapabilities:function(a,b){b.vendorSpecific={tileSets:[]};Q(this,a,b.vendorSpecific)},TileSet:function(a,b){var c={srs:{},bbox:{},resolutions:[]};Q(this,a,c);b.t.push(c)},Resolutions:function(a,b){for(var c=R(a).split(" "),d=0,e=c.length;d<e;d++)""!==c[d]&&b.resolutions.push(parseFloat(c[d]))},Width:function(a,b){b.width=parseInt(R(a),10)},Height:function(a,b){b.height=parseInt(R(a),10)},Layers:function(a,
b){b.layers=R(a)},Styles:function(a,b){b.styles=R(a)}})}p(Y,X);function Z(){U.call(this);var a=this.a["http://www.opengis.net/wms"].BoundingBox;M(this.a["http://www.opengis.net/wms"],{WMS_Capabilities:function(b,a){Q(this,b,a)},LayerLimit:function(b,a){a.layerLimit=parseInt(R(b),10)},MaxWidth:function(b,a){a.maxWidth=parseInt(R(b),10)},MaxHeight:function(b,a){a.maxHeight=parseInt(R(b),10)},BoundingBox:function(b,c){var d=a.apply(this,arguments);d.srs=b.getAttribute("CRS");c.bbox[d.srs]=d},CRS:function(b,a){this.a["http://www.opengis.net/wms"].SRS.apply(this,
arguments)},EX_GeographicBoundingBox:function(b,a){a.llbbox=[];Q(this,b,a.llbbox)},westBoundLongitude:function(b,a){a[0]=R(b)},eastBoundLongitude:function(b,a){a[2]=R(b)},southBoundLatitude:function(b,a){a[1]=R(b)},northBoundLatitude:function(a,c){c[3]=R(a)},MinScaleDenominator:function(a,c){c.maxScale=parseFloat(R(a)).toPrecision(16)},MaxScaleDenominator:function(a,c){c.minScale=parseFloat(R(a)).toPrecision(16)},Dimension:function(a,c){var d={name:a.getAttribute("name").toLowerCase(),units:a.getAttribute("units"),
unitsymbol:a.getAttribute("unitSymbol"),nearestVal:"1"===a.getAttribute("nearestValue"),multipleVal:"1"===a.getAttribute("multipleValues"),"default":a.getAttribute("default")||"",current:"1"===a.getAttribute("current"),values:R(a).split(",")};c.dimensions[d.name]=d},Keyword:function(a,c){var d={value:R(a),vocabulary:a.getAttribute("vocabulary")};c.keywords&&c.keywords.push(d)}});this.a.sld={UserDefinedSymbolization:function(a,c){this.a["http://www.opengis.net/wms"].o.apply(this,arguments);var d=a.getAttribute("InlineFeature");
c.userSymbols.inlineFeature=1==parseInt(d,10);d=a.getAttribute("RemoteWCS");c.userSymbols.remoteWCS=1==parseInt(d,10)},DescribeLayer:function(a,c){this.a["http://www.opengis.net/wms"].m.apply(this,arguments)},GetLegendGraphic:function(a,c){this.a["http://www.opengis.net/wms"].n.apply(this,arguments)}}}p(Z,U);function da(a){a=a||{};a.defaultVersion="1.1.1";this.c={};this.c.v1_1_0=W;this.c.v1_1_1=X;this.c.v1_1_1_WMSC=Y;this.c.v1_3_0=Z;T.call(this,a)}p(da,T);var ea=new da,fa,$=new XMLHttpRequest;$.open("GET","data/ogcsample.xml",!0);$.onload=function(){200==$.status&&(fa=ea.d($.responseXML),document.getElementById("log").innerHTML=window.JSON.stringify(fa,g,2))};$.send();
